@namespace FeedbackWebApp.Components.ContentFeed.Results
@using SharedDump.Models.HackerNews

<div class="comment-item p-3 mb-2 rounded @(IsReply ? "ms-4" : "")">
    <div class="d-flex justify-content-between align-items-center">
        <strong>@Comment.By</strong>
        <small class="text-muted">@DateTimeOffset.FromUnixTimeSeconds(Comment.Time).ToLocalTime().ToString("g")</small>
    </div>
    <div class="comment-body mt-2">@((MarkupString)Comment.Text)</div>
    
    @if (Comment.Kids?.Any() == true)
    {
        <div class="replies mt-3">
            @foreach (var child in Comment.Kids)
            {
                <FeedbackWebApp.Components.ContentFeed.Results.HackerNewsComment Comment="child" IsReply="true" />
            }
        </div>
    }
</div>

@code {
    [Parameter, EditorRequired]
    public Models.HackerNews.HackerNewsComment Comment { get; set; } = null!;

    [Parameter]
    public bool IsReply { get; set; }
}